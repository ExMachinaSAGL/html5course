<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>postMessage: iframe</title>

</head>
<body>

	<div id="log"></div>


	<script>

		// risponde al messaggio proveniente dalla finestra principale
		var sourceDomain = 'http://localhost';

		window.addEventListener('message', function(event) {
			if (event.origin !== sourceDomain) return;
			
			console.log('Messaggio ricevuto:  ' + event.data, event);
			document.querySelector('#log').innerHTML += ("<p>" + event.data + "</p>");

			event.source.postMessage("Echo: " + event.data, event.origin);
		});

	</script>

</body>
</html>